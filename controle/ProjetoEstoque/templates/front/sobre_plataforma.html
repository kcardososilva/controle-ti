{% extends 'base.html' %}
{% block title %}Sobre a plataforma{% endblock %}
{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>

<style>
:root{
  --line:#e5e7eb; --ink:#172133; --soft:#f8fafc; --card:#fff;
  --shadow:0 20px 40px rgba(2,6,23,.07);
  --h:48px; --rad:12px; --padL:44px;
  --grad1:linear-gradient(180deg,#0b1220 0%,#1b2740 100%);
}
*{box-sizing:border-box}
.page{max-width:1100px;margin:22px auto;padding:0 14px;}
.hero{
  background:var(--card); border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow);
  padding:22px 18px; display:flex; gap:14px; align-items:center; justify-content:space-between; flex-wrap:wrap
}
.hero .title{display:flex;align-items:center;gap:12px;color:var(--ink)}
.hero .meta{color:#475569;font-size:.95rem}
.btn{border:none;border-radius:10px;padding:10px 16px;font-weight:800;cursor:pointer;display:inline-flex;align-items:center;gap:8px;text-decoration:none}
.btn-primary{background:linear-gradient(90deg,#223259,#172133);color:#fff}
.btn-secondary{background:#f3f4f6;color:#172133;border:1px solid #d8dee9}
.cards{
  margin-top:14px; display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:12px
}
.card{
  background:linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); color:#fff; border:1px solid #f8f8f8; border-radius:16px; padding:14px 16px; box-shadow:var(--shadow);
  position:relative; overflow:hidden; min-width:0
}
.card i{opacity:.95}
.card .label{font-weight:700; opacity:.92; margin-top:6px}
.card .value{font-size:1.45rem; font-weight:900; margin-top:4px}
.panel{
  margin-top:16px; background:var(--card); border:1px solid var(--line); border-radius:16px; box-shadow:var(--shadow); padding:18px
}
.panel h3{margin:0 0 10px; color:var(--ink); display:flex; align-items:center; gap:8px}
.grid-2{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:14px}
@media(max-width:900px){.grid-2{grid-template-columns:1fr}}

.feature{
  background:var(--soft); border:1px solid var(--line); border-radius:14px; padding:14px; display:flex; gap:12px
}
.feature i{color:#2563eb; font-size:1.2rem}
.feature .txt{color:#0f172a}

.list{
  margin:0; padding-left:18px; color:#0f172a
}
.kv{display:grid; grid-template-columns:160px 1fr; gap:6px 10px; color:#0f172a}
.kv .k{color:#475569; font-weight:700}
.kv .v{color:#0f172a}

/* Accordion (FAQ / Notas) */
.accordion{border:1px solid var(--line); border-radius:14px; overflow:hidden; background:var(--soft)}
.acc-item + .acc-item{border-top:1px solid var(--line)}
.acc-btn{
  width:100%; text-align:left; background:#fff; border:0; padding:14px 16px; cursor:pointer; font-weight:800; color:#172133;
  display:flex; align-items:center; justify-content:space-between
}
.acc-content{display:none; padding:12px 16px; background:#fff; color:#0f172a}
.acc-item.active .acc-content{display:block}
.acc-item.active .acc-btn i{transform:rotate(180deg)}

.footer-actions{display:flex; gap:10px; justify-content:flex-end; margin-top:14px}
.badge{
  display:inline-block; padding:2px 10px; border-radius:999px; background:#eef2ff; color:#1e40af; font-weight:800; font-size:.9rem
}
</style>

<div class="page">
  <!-- HERO -->
  <div class="hero">
    <div>
      <div class="title">
        <i class="fa fa-cubes"></i>
        <div>
          <h2 style="margin:0">{{ app_name }}</h2>
          <div class="meta">
            Versão <b>3.0.0</b>
            {% if build_date %} • Build: {{ build_date }}{% endif %}
            • Agora: {{ now|date:"d/m/Y H:i" }}
          </div>
        </div>
      </div>
    </div>
    <div style="display:flex; gap:10px; flex-wrap:wrap">
      <a href="/" class="btn btn-secondary"><i class="fa fa-arrow-left"></i> Início</a>
      
    </div>
  </div>

  <!-- MÉTRICAS -->
  <div class="cards">
    <div class="card"><i class="fa fa-layer-group"></i><div class="label">Itens</div><div class="value">{{ totais.itens }}</div></div>
    <div class="card"><i class="fa fa-circle"></i><div class="label">Ativos</div><div class="value">{{ totais.ativos }}</div></div>
    <div class="card"><i class="fa fa-database"></i><div class="label">Backup</div><div class="value">{{ totais.backup }}</div></div>
    <div class="card"><i class="fa fa-tools"></i><div class="label">Manutenção</div><div class="value">{{ totais.manutencao }}</div></div>
    <div class="card"><i class="fa fa-exclamation-circle"></i><div class="label">Defeitos</div><div class="value">{{ totais.defeitos }}</div></div>
  </div>

  <!-- VISÃO GERAL -->
  <div class="panel">
    <h3><i class="fa fa-info-circle"></i> Visão geral</h3>
    <div class="grid-2">
      <div class="feature">
        <i class="fa fa-clipboard-list"></i>
        <div class="txt">
          <b>Controle de estoque e ativos</b><br>
          Acompanhe ciclo de vida dos equipamentos, movimentações (transferências, entradas, baixas, manutenção) e status (Ativo, Backup, Manutenção, Defeito).
        </div>
      </div>
      <div class="feature">
        <i class="fa fa-people-group"></i>
        <div class="txt">
          <b>Relacionamentos inteligentes</b><br>
          Usuários, Centros de Custo, Localidades, Fornecedores, Subtipos e Categorias conectados para relatórios ágeis e consistentes.
        </div>
      </div>
      <div class="feature">
        <i class="fa fa-shield-halved"></i>
        <div class="txt">
          <b>Auditoria e segurança</b><br>
          Registros com criador/atualizador e timestamps; permissões por login e trilhas de alteração.
        </div>
      </div>
      <div class="feature">
        <i class="fa fa-gauge-high"></i>
        <div class="txt">
          <b>Performance & UX</b><br>
          Filtros responsivos, ordenação client-side e modais de confirmação para ações sensíveis.
        </div>
      </div>
    </div>
  </div>

  <!-- DADOS DO AMBIENTE -->
  <div class="panel">
    <h3><i class="fa fa-database"></i> Dados do ambiente</h3>
    <div class="kv" style="margin-top:8px">
      <div class="k">Usuários</div><div class="v">{{ totais.usuarios }}</div>
      <div class="k">Localidades</div><div class="v">{{ totais.localidades }}</div>
      <div class="k">Centros de Custo</div><div class="v">{{ totais.centros }}</div>
      <div class="k">Fornecedores</div><div class="v">{{ totais.fornecedores }}</div>
      <div class="k">Subtipos</div><div class="v">{{ totais.subtipos }}</div>
      <div class="k">Categorias</div><div class="v">{{ totais.categorias }}</div>
      <div class="k">Funções</div><div class="v">{{ totais.funcoes }}</div>
      <div class="k">Licenças</div><div class="v">{{ totais.licencas }}</div>
      <div class="k">Movimentações</div><div class="v">{{ totais.movimentacoes }}</div>
    </div>
  </div>

  <!-- FAQ / NOTAS -->
  <div class="panel">
    <h3><i class="fa fa-book-open"></i> Ajuda rápida & notas</h3>
    <div class="accordion" id="acc">
      <div class="acc-item">
        <button class="acc-btn" type="button">
          Como registrar uma movimentação?
          <i class="fa fa-chevron-down"></i>
        </button>
        <div class="acc-content">
          Acesse o item, clique em <b>Nova Movimentação</b> e selecione o tipo (Transferência, Entrada, Baixa, Envio/Retorno de Manutenção),
          definindo quantidades e destinos. O sistema aplica automaticamente as regras de estoque e status.
        </div>
      </div>
      <div class="acc-item">
        <button class="acc-btn" type="button">
          O que muda no “Envio para Manutenção”?
          <i class="fa fa-chevron-down"></i>
        </button>
        <div class="acc-content">
          O status do equipamento passa para <b>Manutenção</b> e a quantidade é debitada em 1. No <b>Retorno</b>, a quantidade é somada em 1
          e o status vai para <b>Backup</b>.
        </div>
      </div>
      <div class="acc-item">
        <button class="acc-btn" type="button">
          PMB no Centro de Custo
          <i class="fa fa-chevron-down"></i>
        </button>
        <div class="acc-content">
          Cada Centro de Custo possui o atributo <b>PMB?</b> (Sim/Não), permitindo relatórios e filtros segmentados.
        </div>
      </div>
      <div class="acc-item">
        <button class="acc-btn" type="button">
          Novidades desta versão
          <i class="fa fa-chevron-down"></i>
        </button>
        <div class="acc-content">
          <ul class="list">
            <li>Layouts uniformes com inputs/seletores responsivos (sem sobreposição).</li>
            <li>Confirmação por modal para exclusões.</li>
            <li>Fluxo de manutenção com ajuste de status e quantidade automático.</li>
            <li>Listagens com filtros inteligentes e ordenação client-side.</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="footer-actions">
      <span class="badge"><i class="fa fa-circle-info"></i> Precisa de algo? Fale com o Kayque.</span>
    </div>
  </div>
</div>

<script>
(function(){
  const acc = document.getElementById('acc');
  if(!acc) return;
  acc.querySelectorAll('.acc-btn').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const item = btn.parentElement;
      const open = item.classList.contains('active');
      acc.querySelectorAll('.acc-item').forEach(i=>i.classList.remove('active'));
      if(!open) item.classList.add('active');
    });
  });
})();
</script>
{% endblock %}
